--- cacti-0.8.6j/lib/html_tree.php	2007-01-17 19:23:10.000000000 -0500
+++ cacti-0.8.6j-patch/lib/html_tree.php	2007-01-27 15:48:50.390625000 -0500
@@ -328,7 +328,7 @@
 	while ($i > 1) {
 		$i--;
 
-		$parent_tier = substr($tier_string, 0, $i * CHARS_PER_TIER);
+		$parent_tier = tree_tier_string(substr($tier_string, 0, $i * CHARS_PER_TIER));
 		$parent_variable = "sess_tree_leaf_expand_" . $leaf["graph_tree_id"] . "_" . $parent_tier;
 
 		$effective = @$_SESSION[$parent_variable];
@@ -365,8 +365,6 @@
    @returns - the string representing the leaf position
 */
 function tree_tier_string($order_key, $chars_per_tier = CHARS_PER_TIER) {
-	$root_test = str_pad('', $chars_per_tier, '0');
-
 	$new_string = preg_replace("/0+$/",'',$order_key);
 
 	return $new_string;
